(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{1274:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var r=a(5893),n=a(7294);a(3931);var s=()=>(0,r.jsxs)("div",{className:"dashboard-container dashboard-skeleton",children:[(0,r.jsx)("div",{className:"skeleton skeleton-chart"}),(0,r.jsx)("div",{className:"skeleton skeleton-chart"}),(0,r.jsx)("div",{className:"skeleton skeleton-chart"})]}),l=a(6495),o=a(7282),i=a(3148);let c=(e,t)=>{let a={};return e.forEach(e=>{let r;let n=new Date(e.date||e.Date);switch(t){case"week":let s=new Date(n.setDate(n.getDate()-n.getDay()));r="".concat(s.getFullYear(),"-").concat(s.getMonth()+1,"-").concat(s.getDate());break;case"year":r=n.getFullYear();break;case"month":r="".concat(n.getFullYear(),"-").concat(n.getMonth()+1);break;default:r=n.toLocaleDateString()}a[r]||(a[r]=[]),a[r].push(e)}),a},d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);var h=a(6942),u=a.n(h),m=e=>{let{data:t}=e;i.kL.register(i.uw,i.f$,i.jn,i.od,i.Dx,i.u,i.De,o.Z);let[a,s]=(0,n.useState)("daily"),[h,m]=(0,n.useState)({labels:[],datasets:[]});function p(e){let t=e.chart.data.datasets[0].data;return t.reduce((e,t)=>e+t,0)/t.length}(0,n.useEffect)(()=>{t&&t.length>0&&g()},[t,a]);let g=()=>{let e;switch(a){case"weekly":e=c(t,"week");break;case"yearly":e=c(t,"year");break;case"monthly":e=c(t,"month");break;default:e=c(t,"date")}let r=Object.keys(e),n=r.map(t=>e[t].reduce((e,t)=>e+(parseFloat(t.amount)||parseFloat(t.Amount)||0),0));m({labels:r,datasets:[{label:"Amount",data:n,borderColor:"#8884d8",fill:!1}]})};return(0,r.jsxs)("div",{className:u().lineChartContainer,children:[(0,r.jsxs)("div",{className:u().chartControls,children:[(0,r.jsx)("label",{htmlFor:"time-interval",children:"Select Time Interval:"}),(0,r.jsxs)("select",{id:"time-interval",value:a,onChange:e=>{s(e.target.value)},children:[(0,r.jsx)("option",{value:"daily",children:"Daily"}),(0,r.jsx)("option",{value:"weekly",children:"Weekly"}),(0,r.jsx)("option",{value:"monthly",children:"Monthly"}),(0,r.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),0===h.labels.length?(0,r.jsx)("p",{children:"No chart data available."}):(0,r.jsx)("div",{className:u().chartWrapper,children:(0,r.jsx)(l.x1,{data:h,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Time Interval",font:{size:14}},ticks:{autoSkip:!0,maxTicksLimit:10},reverse:!1},y:{title:{display:!0,text:"Amount",font:{size:14}},ticks:{beginAtZero:!1}}},plugins:{tooltip:{callbacks:{label:function(e){let t=e.raw;return"number"==typeof t?d(t):t},title:function(e){let t=new Date(e[0].label);return new Intl.DateTimeFormat(e[0].chart.options.locale,{year:"numeric",month:"short",day:"numeric"}).format(t)}}},legend:{display:!1},annotation:{annotations:{avg:{type:"line",borderColor:"black",borderDash:[6,6],borderDashOffset:0,borderWidth:3,label:{position:"center",display:!0,content:e=>"Average: "+d(p(e).toFixed(2))},scaleID:"y",value:e=>p(e)}}}}}})})]})},p=a(8023),g=a.n(p),x=e=>{let{data:t}=e;return t&&0!==t.length?(0,r.jsx)("div",{className:g().tableContainer,children:(0,r.jsxs)("table",{className:g().tableContents,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:g().tableTh,children:"Date"}),(0,r.jsx)("th",{className:g().tableTh,children:"Amount"}),(0,r.jsx)("th",{className:g().tableTh,children:"Category"}),(0,r.jsx)("th",{className:g().tableTh,children:"Description"})]})}),(0,r.jsx)("tbody",{children:t.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:g().tableTd,children:e.date||e.Date}),(0,r.jsx)("td",{className:g().tableTd,children:d(e.amount||e.Amount)}),(0,r.jsx)("td",{className:g().tableTd,children:e.category||e.Category}),(0,r.jsx)("td",{className:g().tableTd,children:e.description||e.Description})]},t))})]})}):(0,r.jsx)("p",{children:"No table data available."})},j=e=>{let{data:t}=e;i.kL.register(i.qi,i.u);let[a,s]=(0,n.useState)({labels:[],datasets:[]});return(0,n.useEffect)(()=>{if(!t||0===t.length){console.warn("No data available for expense breakdown."),s({labels:[],datasets:[]});return}let e=t.reduce((e,t)=>{let a=t.Category||"Uncategorized",r=-parseFloat(t.Amount);return e[a]||(e[a]=0),e[a]+=r,e},{}),a=Object.keys(e).map(t=>({name:t,value:e[t]})),r=["#8884d8","#83a6ed","#8dd1e1","#82ca9d","#a4de6c","#d0ed57","#ffc658","#ff7f0e","#ff6b01","#e86a92"];s({labels:a.map(e=>e.name),datasets:[{data:a.map(e=>e.value),backgroundColor:r.slice(0,a.length),hoverBackgroundColor:r.slice(0,a.length)}]})},[t]),(0,r.jsx)("div",{className:"chart-wrapper",children:(0,r.jsx)(l.$I,{data:a,options:{responsive:!0,maintainAspectRatio:!0,plugins:{tooltip:{callbacks:{label:function(e){if(null!==e.raw)return d(e.raw)}}}}}},JSON.stringify(a))})};a(9383);var y=e=>{let{children:t,onClose:a}=e;return(0,r.jsx)("div",{className:"modal-backdrop",onClick:a,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{className:"modal-close",onClick:a,children:"Î§"}),t]})})},C=e=>{let{data:t}=e,[a,s]=(0,n.useState)(!1),l=t.filter(e=>e.Amount<0).map(e=>({...e,Amount:Math.abs(e.Amount)}));return(0,n.useEffect)(()=>{},[t]),(0,r.jsxs)("div",{className:"dashboard-container",children:[(0,r.jsxs)("div",{className:"card full-width-card",children:[(0,r.jsx)("h2",{children:"Expenses Over Time"}),(0,r.jsx)(m,{data:l})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h2",{children:"Expense Breakdown"}),(0,r.jsx)(j,{data:t.filter(e=>e.Amount<0)})]}),(0,r.jsxs)("div",{className:"card majority-card",onClick:()=>s(!0),children:[(0,r.jsx)("h2",{children:"Data Table"}),(0,r.jsxs)("div",{className:"table-container",children:[(0,r.jsx)(x,{data:t}),(0,r.jsx)("div",{className:"table-overlay"})]})]}),a&&(0,r.jsx)(y,{onClose:()=>s(!1),children:(0,r.jsx)(x,{data:t})})]})},b=a(1793),v=a.n(b),f=a(8901),_=a(7460),k=a.n(_),D=a(4105),N=e=>{let{onFileUploaded:t}=e,[a,s]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),i={Date:["Date","Posting Date","Transaction Date","Transaction DateTime"],Description:["Description","Details","Memo","Narrative"],Amount:["Amount","Transaction Amount","Credit Amount","Debit Amount"]},c=e=>{k().parse(e,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:e=>{t(e.data.map(e=>d(e))),s(!1),o(!0)},error:e=>{console.error("CSV parsing error: ".concat(e.message)),alert("Error parsing CSV file."),s(!1)}})},d=e=>{let t={};return Object.keys(i).forEach(a=>{let r=i[a].find(t=>e.hasOwnProperty(t));t[a]=r?e[r]:null}),t},h=e=>{let a=new FileReader;a.onload=e=>{let a=e.target.result,r=D.ij(a,{type:"binary"}),n=r.SheetNames[0],l=r.Sheets[n],[c,...d]=D.P6.sheet_to_json(l,{header:1});t(d.map(e=>{let t={};return Object.keys(i).forEach(a=>{let r=i[a].find(e=>c.includes(e));t[a]=r?e[c.indexOf(r)]:null}),t})),s(!1),o(!0)},a.onerror=e=>{console.error("Excel parsing error: ".concat(e.message)),alert("Error parsing Excel file."),s(!1)},a.readAsBinaryString(e)},u=(0,n.useCallback)(e=>{s(!0),o(!1),e.forEach(e=>{"text/csv"===e.type?c(e):e.type.includes("spreadsheetml")?h(e):(console.error("Unsupported file type: ".concat(e.type)),alert("Unsupported file type. Please upload a CSV or Excel file."),s(!1))})},[t]),{getRootProps:m,getInputProps:p}=(0,f.uI)({onDrop:u});return(0,r.jsx)("div",{children:l?(0,r.jsxs)("div",{className:v().uploadStatus,children:[(0,r.jsx)("h1",{children:"File uploaded successfully."}),(0,r.jsx)("button",{onClick:()=>{o(!1),t([])},children:"Clear data"})]}):(0,r.jsxs)("div",{...m(),className:v().dropzone,children:[(0,r.jsx)("input",{...p()}),a?(0,r.jsx)("h1",{children:"Uploading..."}):(0,r.jsx)("h1",{children:"Drag 'n' drop some files here, or click to select files"})]})})},w=e=>{let{headers:t,onCategoryCreate:a}=e,[s,l]=(0,n.useState)(""),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)("contains"),[h,u]=(0,n.useState)(t[0]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("select",{value:h,onChange:e=>u(e.target.value),children:t.map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),(0,r.jsxs)("select",{value:c,onChange:e=>d(e.target.value),children:[(0,r.jsx)("option",{value:"contains",children:"Contains"}),(0,r.jsx)("option",{value:"exact",children:"Is Exactly"}),(0,r.jsx)("option",{value:"startsWith",children:"Starts With"}),(0,r.jsx)("option",{value:"endsWith",children:"Ends With"})]}),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Enter matching ".concat(c.toLowerCase())}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Enter new category"}),(0,r.jsx)("button",{onClick:()=>{a(s,o,c,h),l(""),i(""),d("contains"),u(t[0])},children:"Confirm New Category"})]})},S=a(2894),A=a.n(S),T=e=>{let{headers:t,categories:a,onCategoryCreate:s,onClose:l,onSave:o}=e,[i,c]=(0,n.useState)(!1);return(0,r.jsx)("div",{className:A().categoryManagerContainer,children:(0,r.jsxs)("div",{className:A().categoryManager,children:[(0,r.jsx)("h2",{children:"Manage Categories"}),(0,r.jsx)("div",{className:A().categoryList,children:a.map((e,t)=>(0,r.jsx)("div",{className:A().categoryItem,children:(0,r.jsxs)("span",{children:[e.newCategory,": ",e.selectedHeader," ",e.matchType," ",e.stringMatch]})},t))}),i?(0,r.jsx)(w,{headers:t,onCategoryCreate:(e,t,a,r)=>{s(e,t,a,r),c(!1)}}):(0,r.jsx)("button",{onClick:()=>c(!0),children:"Add Category"}),(0,r.jsxs)("div",{className:A().categoryManagerButtons,children:[(0,r.jsx)("button",{onClick:l,children:"Close & Cancel"}),(0,r.jsx)("button",{onClick:()=>{o(),l()},children:"Save"})]})]})})},E=()=>{let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[o,i]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[h,u]=(0,n.useState)(!1),m=[{Date:"2024-01-01",Amount:50,Category:"Groceries",Description:"Supermarket"},{Date:"2024-01-02",Amount:-30,Category:"Transportation",Description:"Bus fare"},{Date:"2024-01-03",Amount:-100,Category:"Entertainment",Description:"Concert tickets"},{Date:"2024-01-04",Amount:2e3,Category:"Salary",Description:"Monthly salary"},{Date:"2024-01-05",Amount:-150,Category:"Rent",Description:"Monthly rent"},{Date:"2024-01-06",Amount:-20,Category:"Utilities",Description:"Electricity bill"},{Date:"2024-01-07",Amount:-10,Category:"Food",Description:"Fast food"},{Date:"2024-01-08",Amount:100,Category:"Gift",Description:"Gift from friend"},{Date:"2024-01-09",Amount:-50,Category:"Shopping",Description:"Clothing"},{Date:"2024-01-10",Amount:-5,Category:"Transportation",Description:"Taxi"}],p=e=>{if(l(!0),!e||0===e.length){console.warn("Empty file uploaded or invalid data."),t([]),l(!1);return}d(Object.keys(e[0])),t(g(e,o)),l(!1)},g=(e,t)=>e.map(e=>{let a=t.find(t=>{switch(t.matchType){case"exact":return e[t.selectedHeader].toLowerCase()===t.stringMatch.toLowerCase();case"startsWith":return e[t.selectedHeader].toLowerCase().startsWith(t.stringMatch.toLowerCase());case"endsWith":return e[t.selectedHeader].toLowerCase().endsWith(t.stringMatch.toLowerCase());default:return e[t.selectedHeader].toLowerCase().includes(t.stringMatch.toLowerCase())}});return a?{...e,Category:a.newCategory}:e});return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Dashboard Overview"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Upload Your Data"}),(0,r.jsx)(N,{onFileUploaded:p})]}),(0,r.jsxs)("div",{children:[e.length>0&&(0,r.jsx)("button",{onClick:()=>u(!0),children:"Open Category Manager"}),h&&(0,r.jsx)(T,{headers:c,categories:o,onCategoryCreate:(e,t,a,r)=>{e&&t&&a&&r&&i([...o,{newCategory:e,stringMatch:t,matchType:a,selectedHeader:r}])},onClose:()=>u(!1),onSave:()=>{t(g(e,o)),u(!1)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Quick View: Reports"}),a?(0,r.jsx)(s,{}):e.length?(0,r.jsx)(C,{data:e}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"No data available. Please upload a file to view reports."}),(0,r.jsx)(s,{})]})]}),(0,r.jsx)("button",{onClick:()=>p(m),children:"Use Test Data"}),(0,r.jsx)("button",{onClick:()=>{t([]),i([]),d([])},children:"Clear Data"})]})}},2894:function(e){e.exports={categoryManagerContainer:"categorymanager_categoryManagerContainer__NTz2_",categoryManager:"categorymanager_categoryManager__X0wPc",categoryList:"categorymanager_categoryList__xHR4U",categoryItem:"categorymanager_categoryItem__ANJZV",categoryManagerButtons:"categorymanager_categoryManagerButtons__GKCEu"}},1793:function(e){e.exports={dropzone:"fileupload_dropzone__cI_ZA",uploadStatus:"fileupload_uploadStatus__3LW_7"}},6942:function(e){e.exports={lineChartContainer:"linechart_lineChartContainer__XZEQz",chartControls:"linechart_chartControls__xQUJQ",chartWrapper:"linechart_chartWrapper__57dnM"}},9383:function(e){e.exports={"modal-backdrop":"modal_modal-backdrop__6FSbs","modal-content":"modal_modal-content__vFjyT","modal-close":"modal_modal-close__ETevj"}},3931:function(e){e.exports={skeleton:"skeleton_skeleton__Bzazt",loading:"skeleton_loading__EwLKp",skeletonChart:"skeleton_skeletonChart__CNdNB"}},8023:function(e){e.exports={tableContainer:"table_tableContainer__mSloZ",tableContents:"table_tableContents__Mc12A",tableTh:"table_tableTh__x6G70",tableTd:"table_tableTd__T_vjs"}},67:function(){},2061:function(){}}]);